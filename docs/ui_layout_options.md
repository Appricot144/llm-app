# Claude APIクライアント 画面構成詳細仕様

## 採用レイアウト：3ペイン構成（折りたたみ・リサイズ対応）

### 基本レイアウト構造

```
┌─────────────────────────────────────────────────────────────┐
│ Header (固定高さ: 60px)                                        │ 
│ APIキー状態 | エラー表示エリア | 設定ボタン                        │
├─[←]─────┬─────────────────────────────┬─────────[→]────┤
│ [≡]     │                             │      [≡]       │
│ Chat    │                             │  File Manager  │
│ Sessions│        Chat Area            │                │
│ (可変幅) │        (可変幅)               │     (可変幅)     │
│         │                             │                │
│ 📁New   │ ┌─────────────────────────┐ │ 📎Upload       │
│ ├Chat1  │ │ User: Hello             │ │ ┌─────────────┐ │
│ ├Chat2  │ │ Claude: Hi there!       │ │ │ Drag & Drop │ │
│ ├Chat3  │ │                         │ │ │   Area      │ │
│ └...    │ │ [📋Copy] ```js          │ │ └─────────────┘ │
│         │ │ console.log('hello')    │ │                │
│ 🔍Search│ │ ```                     │ │ 📄Uploaded:    │
│         │ │                         │ │ ┌─file1.js──❌┐ │
│         │ └─────────────────────────┘ │ │ 1.2KB        │ │
│         │                             │ └──────────────┘ │
│         │ ┌─────────────────────────┐ │ ┌─file2.md──❌┐ │
│         │ │ 💬 Message Input   📤  │ │ │ 0.8KB        │ │
│         │ └─────────────────────────┘ │ └──────────────┘ │
├─────────┼─────────────────────────────┼────────────────┤
│200-400px│         残り全体              │    250-400px   │
└─────────┴─────────────────────────────┴────────────────┘
```

## サイドバー制御機能

### 折りたたみ機能

#### 左サイドバー（チャットセッション）
```
【展開状態】              【折りたたみ状態】
┌─[←]─Chat Sessions─┐    ┌[→]┐
│ [≡] Session管理    │    │[≡]│ ← ホバーで展開プレビュー
│                    │    └───┘
│ 📁New Chat         │
│ ├Chat1 (今日 10:30) │
│ ├Chat2 (昨日 15:20) │
│ └Chat3 (6/15 09:15)│
└────────────────────┘
```

#### 右サイドバー（ファイル管理）
```
【展開状態】              【折りたたみ状態】
┌─File Manager─[→]─┐     ┌[←]┐
│ ファイル管理    [≡]│     │[≡]│ ← ホバーで展開プレビュー
│                   │     └───┘
│ 📎Upload Files    │
│ ┌───────────────┐ │
│ │ Drag & Drop   │ │
│ └───────────────┘ │
└───────────────────┘
```

### リサイズ機能

#### リサイズハンドル
```
┌─Left Sidebar─┐ │ ┌─────Chat Area─────┐ │ ┌─Right Sidebar─┐
│              │ ⫸ │                   │ ⫷ │               │
│              │ │ │                   │ │ │               │
│              │ │ │                   │ │ │               │
└──────────────┘ │ └───────────────────┘ │ └───────────────┘
                 ↑                       ↑
            リサイズハンドル           リサイズハンドル
```

#### サイズ制限
- **左サイドバー**：最小150px ～ 最大600px
- **右サイドバー**：最小200px ～ 最大500px  
- **中央エリア**：最小400px（これより狭くならない）

## 各エリアの詳細仕様

### Header（ヘッダーエリア）
```
┌─────────────────────────────────────────────────────────────┐
│ 🔑API: [🟢接続中] │ ⚠️エラー表示エリア │ ⚙️設定 │ ❓ヘルプ  │
└─────────────────────────────────────────────────────────────┘
```

**要素：**
- **APIキー状態**：🟢接続OK / 🔴エラー / ⚪未設定 + クリックで設定画面
- **エラー表示**：API制限・ネットワークエラー等をトースト+詳細表示
- **設定ボタン**：APIキー変更・UI設定・その他
- **ヘルプボタン**：使い方・ショートカット一覧

### Left Sidebar（チャットセッション管理）

#### 展開時の要素
```
┌─[←]─Chat Sessions────────┐
│ [≡] 折りたたみボタン       │
│                          │
│ 📁 [+ New Chat]          │
│ ┌──────────────────────┐ │
│ │ 🔍 Search Sessions   │ │
│ └──────────────────────┘ │
│                          │
│ 📋 Recent Sessions:      │
│ ┌────────────────────❌┐ │
│ │●Chat 1               │ │ ← アクティブセッション
│ │  今日 10:30 (5msgs)  │ │
│ └──────────────────────┘ │
│ ┌──────────────────────┐ │
│ │ Chat 2               │ │
│ │  昨日 15:20 (12msgs) │ │
│ └──────────────────────┘ │
│ ┌──────────────────────┐ │
│ │ Chat 3               │ │
│ │  6/15 09:15 (3msgs)  │ │
│ └──────────────────────┘ │
└──────────────────────────┘
```

**機能：**
- **新規チャット作成**：ワンクリックで新セッション
- **セッション検索**：名前・日時・内容で検索
- **セッション情報**：作成日時・メッセージ数表示
- **アクティブ表示**：現在のセッションをハイライト
- **右クリックメニュー**：削除・名前変更・複製

#### 折りたたみ時
```
┌[→]┐
│[≡]│ ← ホバーで一時展開プレビュー
│ ● │ ← アクティブセッション表示
│ 5 │ ← セッション数
└───┘
```

### Center Area（メインチャットエリア）

#### チャット表示エリア
```
┌─────────────────────────────────────────┐
│ 💬 Chat Session: "Chat 1"               │ ← セッション名（編集可能）
├─────────────────────────────────────────┤
│ 📄 Context: file1.js, file2.md         │ ← 含まれるファイル表示
├─────────────────────────────────────────┤
│                                         │
│ 👤 User [今日 10:30]                    │
│ Hello, please check this JavaScript     │
│ code.                                   │
│                                         │
│ 🤖 Claude [今日 10:31]                  │
│ I'll help you check the JavaScript      │ 
│ code. Looking at your file...           │
│                                         │
│ [📋Copy] ```javascript                   │
│ function greet(name) {                  │
│     console.log(`Hello, ${name}!`);    │
│ }                                       │
│ ```                                     │ 
│                                         │
│ The code looks good! Here are some...  │
│                                         │
└─────────────────────────────────────────┘
```

#### メッセージ入力エリア
```
┌─────────────────────────────────────────┐
│ 💬 Message to Claude:                   │
│ ┌─────────────────────────────────────┐ │
│ │ Type your message here...           │ │
│ │                                     │ │
│ │                                     │ │
│ └─────────────────────────────────────┘ │
│ 📎Files: file1.js, file2.md  📤 Send   │
└─────────────────────────────────────────┘
```

### Right Sidebar（ファイル管理）

#### 展開時の要素
```
┌─File Manager─[→]─────────┐
│ ファイル管理         [≡] │
│                          │
│ 📎 Upload Files:         │
│ ┌──────────────────────┐ │
│ │   📁 Drag & Drop     │ │
│ │      Files Here      │ │
│ │                      │ │
│ │   [📄 Browse Files]  │ │
│ └──────────────────────┘ │
│                          │
│ 📄 Current Files (2):    │
│ ┌──────────────────────┐ │
│ │📄 file1.js        ❌│ │
│ │   1.2KB  Added:10:25 │ │
│ │   [👁View] [📋Copy]  │ │
│ └──────────────────────┘ │
│ ┌──────────────────────┐ │
│ │📄 file2.md        ❌│ │
│ │   0.8KB  Added:10:30 │ │
│ │   [👁View] [📋Copy]  │ │
│ └──────────────────────┘ │
│                          │
│ 📊 Context Usage:        │
│ ■■■■■□□□□□ 50%        │
│ 2.0KB / 4.0KB limit     │
└──────────────────────────┘
```

**機能：**
- **ドラッグ&ドロップ**：ファイルを直接エリアにドロップ
- **ファイルブラウザ**：従来のファイル選択ダイアログ
- **ファイル一覧**：名前・サイズ・追加時刻表示
- **ファイル操作**：表示・コピー・削除
- **コンテキスト使用量**：現在の使用量を視覚的に表示

#### 折りたたみ時
```
┌[←]┐
│[≡]│ ← ホバーで一時展開
│📎 │ 
│ 2 │ ← ファイル数
└───┘
```

## UI状態管理

### レスポンシブ対応
- **大画面（>1400px）**：3ペイン全展開
- **中画面（1000-1400px）**：デフォルトサイズで表示
- **小画面（<1000px）**：右サイドバー自動折りたたみ
- **モバイル（<768px）**：タブ切り替え表示に変更

### ユーザー設定の保存
- サイドバーの幅設定
- 折りたたみ状態
- テーマ設定（ダーク/ライト）
- その他UI設定

### ショートカットキー
- **Ctrl+N**：新しいチャット
- **Ctrl+Shift+F**：セッション検索
- **Ctrl+U**：ファイルアップロード
- **Ctrl+Enter**：メッセージ送信
- **Ctrl+1**：左サイドバー切り替え
- **Ctrl+2**：右サイドバー切り替え

## 実装時の考慮事項

### パフォーマンス
- **仮想スクロール**：大量のセッション・メッセージ対応
- **遅延読み込み**：古いセッションは必要時に読み込み
- **ファイルキャッシュ**：アップロード済みファイルのキャッシュ

### アクセシビリティ
- **キーボード操作**：全機能をキーボードで操作可能
- **スクリーンリーダー**：適切なaria-label設定
- **コントラスト**：WCAG 2.1 AA準拠

### データ同期
- **リアルタイム保存**：メッセージ・設定の自動保存
- **競合解決**：複数タブ間での状態同期
- **バックアップ**：ローカルストレージ + サーバー保存

この仕様で実装を進めるのに必要な追加情報はありますか？例えば、特定のコンポーネントの詳細や、状態管理の方法について検討したい部分があれば教えてください。